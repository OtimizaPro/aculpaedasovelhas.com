{
  "meta_data": {
    "project_name": "A Culpa é Das Ovelhas",
    "version": "1.0.1",
    "last_updated": "2025-11-27",
    "maintainer_intent": "Documentação centralizada da arquitetura WordPress.com + GitHub Actions para evitar regressões no fluxo de deploy."
  },
  "resources": {
    "tech_stack": {
      "language_core": [
        { "name": "PHP", "version": "8.x compatível com WordPress", "role": "Templates e lógica do tema" },
        { "name": "JavaScript (Vanilla)", "version": "ES6", "role": "Interações do front-end" },
        { "name": "CSS", "version": "Custom", "role": "Estilos CoreNest" }
      ],
      "frameworks": [
        { "name": "WordPress Theme API", "version": "6.x", "role": "Renderização e rotas" },
        { "name": "WordPress REST API", "version": "v2", "role": "Criação automatizada de páginas" }
      ],
      "database": {
        "engine": "MySQL gerenciado pela WordPress.com",
        "notes": "Acesso indireto via painel; nenhuma alteração direta no código."
      },
      "tools": {
        "ci_cd": "GitHub Actions - .github/workflows/deploy-theme.yml",
        "local_scripts": "automation/deploy.ps1 para operações manuais",
        "secrets": "Application Password do WordPress e credenciais SFTP armazenadas como GitHub Secrets"
      }
    },
    "infrastructure": {
      "host": "WordPress.com Business (site: https://aculpaedasovelhas.com)",
      "deploy_method": "GitHub → Workflow deploy-theme.yml → SFTP automático para wp-content/themes/aculpa-theme"
    }
  },
  "troubleshooting_log": [
    {
      "id": "SFTP-2025-11-27",
      "date": "2025-11-27",
      "error_signature": "Deploy automatizado conclui sem alterar o site; tema em produção permanece 'Otimiza Pro'.",
      "root_cause": "Etapa de SFTP do workflow falhou porque as credenciais aceitas pelo WordPress.com não estavam válidas/localmente acessíveis, interrompendo a sincronização do tema.",
      "solution_implemented": "Confirmar que apenas o fluxo GitHub Actions deve ser usado; credenciais devem ser revisadas no painel WordPress.com e atualizadas nos GitHub Secrets antes do próximo deploy."
    }
  ],
  "procedures": {
    "deploy_protocol": {
      "steps": [
        "Validar alterações localmente e checar 'git status'.",
          "Executar 'git add .' e 'git commit -m \"mensagem\"' no branch main.",
        "Rodar 'git push origin main' para acionar o workflow deploy-theme.yml.",
        "Acompanhar a execução em GitHub Actions (jobs: Validate → Build → Deploy via SFTP → Create Pages → Clear Cache → Validate).",
        "Após o sucesso, abrir https://aculpaedasovelhas.com e páginas críticas (/manifesto, /o-livrinho, /artigos) para garantir que o layout CoreNest está ativo e sem banner de gifting."
      ],
      "requirements": [
        "Git instalado e acesso ao repositório OtimizaPro/aculpaedasovelhas.com",
        "Branch 'main' limpo antes do push",
        "Secrets WP_FTP_* e WP_APP_PASSWORD configurados no GitHub",
        "Permissões WordPress.com Business para Application Passwords"
      ]
    }
  }
}
